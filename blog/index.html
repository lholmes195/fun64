<html>
<head><title>Fun64 updates</title>
<style>

*		{box-sizing:border-box;}
body	{background:#f7f4fd; font-family:mono, sans-serif; font-size:16px; line-height:24px; color:#3a3a3a; width:100%; padding:50px; margin:0px auto;}
h1		{font-size:4em; font-weight:normal; color:#1400ff;}
h2		{font-size:2em; font-weight:normal;}

a		{color:#1400ff;}

a.bar	{color:#f7f4fd; background-color:#3a3a3a; border-radius:4px; padding:5px; text-decoration:none; border-bottom:none;}
a.bar:hover	{background-color:#1400ff; border-bottom:none;}


.nav	{display:inline-block; vertical-align:top; width:50%;}
.nav:nth-of-type(2)	{text-align:right;}

.line, .blog_wrap	{border-top:1px dashed #1400ff; margin-top:40px; margin-bottom:40px; position:relative;}
.blog_info	{position:absolute; right:10px; top:10px;}

</style>
<script	src="/fun64/js/jquery-3.1.1.min.js" ></script>
<script	src="/fun64/js/google-code-prettify/prettify.js" ></script>
<script	src="/fun64/js/google-code-prettify/lang-lua.js" ></script>
<link rel="stylesheet" type="text/css" href="/fun64/js/google-code-prettify/skins/sons-of-obsidian.css" /></head>
<body><div class="nav">You are reading: <span>Fun64 dev blog</span></div><div class="nav"><a href="/fun64/" class="bar">Home</a></div>

<div class="blog_wrap">
	<div class="blog_info"><a href="/fun64/blog/2017-02-12-hello-world">Hello World!</a> by xriss on 2017-02-12</div>
	<h2 id="-_blog_post_json-title-">Hello World!</h2>
<p>Apparently if your hello world example is longer than a couple of lines 
then you are open to ridicule.</p>
<p>I suspect people who say this are blissfully unaware exactly what _main 
gets up to before your code runs and lets not even think about C++.</p>
<p>Still it helps to remove as much gubbins as possible so the code that&#39;s 
running becomes obvious. Fun64 is built around the idea that you should 
define the hardware before the program runs so lets hide all that away 
inside a builtin function that will set you up a basic looking screen 
to work with.</p>
<p>Introducing the configurator, this function will provide various setups 
depending on the mode requested and also provide a main function that 
will allow you to provide a single update function rather than dealing 
with more complexities. A single update function is less optimal but a 
perfectly reasonable way to write short bits of test code.</p>
<p>So far the only mode we have is &quot;fun64&quot; which will get you a 60fps 
320x240 screen with three layers and the Swanky32 palette. The three 
layers gives us a copper background, a tile+sprite foreground and 
finally a text overlay on the very top. For graphical memory we have a 
64x64 area of 8x8 tiles (4096 in total) and we auto upload the 4x8 
fun64 font to the very first line for use by the text layer.</p>
<p>NB: If you clobber this top line all your text will go funny, just like 
on real hardware.</p>
<p>The main point of the layers is so we can have drop shadows between 
them, the text layer on top gives us some very cheap 80s looking text 
menus when used with solid blocks of background color.</p>

	
Checkout the Fun64 <a href="/fun64/blog/2017-02-12-hello-world/helloworld.fun.lua">lua source file</a> or view the result <a href="/fun64/run/?url=/fun64/blog/2017-02-12-hello-world/helloworld.fun.lua">fullscreen</a>.
<pre id="code/fun64/blog/2017-02-12-hello-world"class="lang-lua" style="height:512px;overflow:scroll;padding:16px;"></pre>
<script>
	$.get("/fun64/blog/2017-02-12-hello-world/helloworld.fun.lua", function(data){
		$("[id=\"code/fun64/blog/2017-02-12-hello-world\"]").text(data).addClass("prettyprint");
		PR.prettyPrint();
	});
</script>


</div>


<div class="blog_wrap">
	<div class="blog_info"><a href="/fun64/blog/2017-01-27-comic-test">Comic test.</a> by xriss on 2017-01-27</div>
	<h2 id="-_blog_post_json-title-">Comic test.</h2>
<p>Lets see if we can build 4lfa.com style comics using just fun64 :)</p>

	
Checkout the Fun64 <a href="/fun64/blog/2017-01-27-comic-test/comic.fun.lua">lua source file</a> or view the result <a href="/fun64/run/?url=/fun64/blog/2017-01-27-comic-test/comic.fun.lua">fullscreen</a>.
<pre id="code/fun64/blog/2017-01-27-comic-test"class="lang-lua" style="height:512px;overflow:scroll;padding:16px;"></pre>
<script>
	$.get("/fun64/blog/2017-01-27-comic-test/comic.fun.lua", function(data){
		$("[id=\"code/fun64/blog/2017-01-27-comic-test\"]").text(data).addClass("prettyprint");
		PR.prettyPrint();
	});
</script>


</div>


<div class="blog_wrap">
	<div class="blog_info"><a href="/fun64/blog/2017-01-20-basic-fun">Basic fun!</a> by xriss on 2017-01-20</div>
	<h2 id="-_blog_post_json-title-">Basic fun!</h2>
<p>A cut down and basic fun example, we do not make many assumptions so 
you are free to configure and setup your code to your own tastes.</p>
<p>There are only two parts that you must provide for fun to work. The 
first is a table describing the virtual hardware component setup, eg 
the resolution of screen and tilemaps and sprite layers to display.</p>
<pre><code>hardware={
    {
        component=&quot;screen&quot;,
        size={424,240}, -- lowrez with a 1920x1080 aspect
        scale=3, -- draw in a window at 3 times scale
        fps=60, -- 60 fps please
    },
    ...
}
</code></pre><p>This requests the virtual hardware that will be setup before main is 
called. system is a global table that will be created according to your 
requested hardware and can then be referenced when the main function is 
called.</p>
<p>The second is a main function which will be called as a yield-able 
co-routine with a table that should be treated as an incoming message. 
Use the basic skeleton below to receive need.setup/update/draw 
requests. As you can see it is possible to have multiple needs at once 
and this call structure allows for a setup, repeat update/draw then cleanup 
flow of code within this co-routine.</p>
<pre><code>function main(need)
    if not need.setup then need=coroutine.yield() end -- wait for setup request

    -- perform setup

    local done=false while not done do
        need=coroutine.yield()

        if need.update then

            -- perform update

        end

        if need.draw then

            -- perform draw

        end            

        if need.clean then done=true end -- cleanup requested
    end

    -- perform cleanup

end
</code></pre>
	
Checkout the Fun64 <a href="/fun64/blog/2017-01-20-basic-fun/basic.fun.lua">lua source file</a> or view the result <a href="/fun64/run/?url=/fun64/blog/2017-01-20-basic-fun/basic.fun.lua">fullscreen</a>.
<pre id="code/fun64/blog/2017-01-20-basic-fun"class="lang-lua" style="height:512px;overflow:scroll;padding:16px;"></pre>
<script>
	$.get("/fun64/blog/2017-01-20-basic-fun/basic.fun.lua", function(data){
		$("[id=\"code/fun64/blog/2017-01-20-basic-fun\"]").text(data).addClass("prettyprint");
		PR.prettyPrint();
	});
</script>


</div>




<div> </div>
</body>
</html>